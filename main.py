import streamlit as st
from PIL import Image

# ==========================
# ✅ Streamlit 설정
# ==========================
st.set_page_config(
    page_title="MBTI 진로 추천",
    page_icon="🧭",
    layout="centered",
)

# ==========================
# ✅ 헤더 디자인
# ==========================
st.markdown(
    """
    <style>
    .main-title {
        font-size: 2.3em;
        font-weight: 800;
        color: #3E64FF;
        text-align: center;
        margin-bottom: 0.4em;
    }
    .sub-title {
        font-size: 1.1em;
        text-align: center;
        color: #555;
        margin-bottom: 2em;
    }
    .career-box {
        background-color: #f9f9f9;
        padding: 1em 1.2em;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        margin-bottom: 1em;
    }
    </style>
    """,
    unsafe_allow_html=True,
)

st.markdown("<div class='main-title'>🧭 MBTI별 진로 추천</div>", unsafe_allow_html=True)
st.markdown("<div class='sub-title'>본인의 MBTI를 선택하고 어울리는 직업을 알아보세요!</div>", unsafe_allow_html=True)

# ==========================
# ✅ MBTI 리스트
# ==========================
MBTI_LIST = [
    "ISTJ", "ISFJ", "INFJ", "INTJ",
    "ISTP", "ISFP", "INFP", "INTP",
    "ESTP", "ESFP", "ENFP", "ENTP",
    "ESTJ", "ESFJ", "ENFJ", "ENTJ",
]

# ==========================
# ✅ MBTI별 추천 진로 (확장판)
# ==========================
CAREER_MAP = {
    "ISTJ": [
        "회계사 — 정확하고 체계적인 업무 처리",
        "공무원 — 절차 중심, 안정적인 직무 선호",
        "데이터 분석가 — 질서정연한 정보 관리",
        "품질관리(QA) 전문가 — 꼼꼼함과 세부 관리",
        "보안전문가 — 규칙 준수와 체계 유지"
    ],
    "ISFJ": [
        "간호사 — 헌신적이며 섬세한 돌봄 능력",
        "교사 — 학생의 성장 지원에 보람 느낌",
        "사회복지사 — 현실적 도움 제공에 관심",
        "행정직 — 체계적인 업무 및 팀 지원",
        "HR 전문가 — 사람을 돕고 관계 유지"
    ],
    "INFJ": [
        "심리상담사 — 타인의 내면을 이해하고 돕기",
        "작가/시인 — 내적 통찰을 글로 표현",
        "비영리기구 활동가 — 가치 중심적 직업 선호",
        "예술치료사 — 감정 표현과 회복 지원",
        "콘텐츠 플래너 — 스토리텔링 기반 창작"
    ],
    "INTJ": [
        "전략기획자 — 체계적 분석과 장기 비전",
        "연구원 — 독창적 아이디어 탐구",
        "데이터 사이언티스트 — 논리적 문제 해결",
        "경영 컨설턴트 — 구조적 사고로 문제 분석",
        "CTO/창업가 — 기술 중심의 리더십"
    ],
    "ISTP": [
        "엔지니어 — 손으로 직접 문제 해결",
        "파일럿 — 실전 중심의 집중력",
        "정비사 — 도구 다루는 기술적 능력",
        "수리공/전문 기술자 — 실용적 사고력",
        "소프트웨어 개발자 — 시스템 최적화"
    ],
    "ISFP": [
        "디자이너(그래픽/패션) — 감성적 미적 표현",
        "사진작가 — 순간과 감정 포착",
        "요리사 — 창의적 실습 활동 선호",
        "바리스타 — 세심한 손재주와 미감",
        "인테리어 디자이너 — 공간 미학 표현"
    ],
    "INFP": [
        "작가 — 이상과 가치 중심의 표현",
        "상담사 — 깊은 공감과 이해력",
        "콘텐츠 전략가 — 감성적 스토리텔링",
        "사회운동가 — 의미 있는 변화 추구",
        "UX 디자이너 — 사람 중심의 설계"
    ],
    "INTP": [
        "연구원 — 논리적 사고와 실험 탐구",
        "AI 개발자 — 복잡한 문제 해결 선호",
        "데이터 엔지니어 — 구조화된 사고력",
        "교수/학자 — 개념 탐구와 이론 발전",
        "시스템 아키텍트 — 효율적 구조 설계"
    ],
    "ESTP": [
        "영업/마케팅 — 빠른 판단력과 실행력",
        "이벤트 플래너 — 즉흥적 문제 해결 능력",
        "응급구조대원 — 현장 중심의 활동",
        "스포츠 코치 — 경쟁과 추진력",
        "창업가 — 행동력과 도전정신"
    ],
    "ESFP": [
        "연예인/MC — 사람들 앞에서 빛나는 매력",
        "매장 매니저 — 서비스와 고객 중심 사고",
        "이벤트 기획자 — 생동감 있는 활동 선호",
        "여행 가이드 — 즉흥성과 사교성 발휘",
        "유튜버/인플루언서 — 표현력과 소통력"
    ],
    "ENFP": [
        "광고기획자 — 창의적 아이디어 발산",
        "창업가 — 비전 중심의 리더십",
        "홍보/PR 전문가 — 사람 중심 커뮤니케이션",
        "크리에이티브 디렉터 — 감성적 설득력",
        "소셜미디어 매니저 — 열정과 친화력"
    ],
    "ENTP": [
        "컨설턴트 — 혁신적 문제 해결",
        "변호사 — 논리적 설득과 전략적 사고",
        "스타트업 창업자 — 아이디어 실험가",
        "벤처캐피탈리스트 — 기회 포착과 도전",
        "미디어 전략가 — 빠른 판단과 분석"
    ],
    "ESTJ": [
        "운영관리자 — 체계적 조직 관리",
        "프로젝트 매니저 — 일정과 품질 통제",
        "은행원 — 안정성과 실무 중심",
        "관리직 — 목표 중심의 리더십",
        "경영지원 — 효율적 절차 구축"
    ],
    "ESFJ": [
        "HR 매니저 — 사람 관리와 조직 문화 강화",
        "간호 관리자 — 돌봄과 리더십 결합",
        "고객 성공 매니저 — 서비스 품질 향상",
        "학교 교사 — 관계 중심 교육자",
        "이벤트 코디네이터 — 조화와 질서 유지"
    ],
    "ENFJ": [
        "리더십 코치 — 타인 성장 지원",
        "교육자 — 영향력 있는 멘토형 리더",
        "브랜드 매니저 — 메시지 전달 능력",
        "사회운동가 — 긍정적 영향력 확산",
        "조직 컨설턴트 — 인간 중심 변화 유도"
    ],
    "ENTJ": [
        "CEO — 비전 설정과 실행 리더십",
        "전략 컨설턴트 — 분석과 추진력 결합",
        "투자은행가 — 판단력과 리스크 관리",
        "기획 디렉터 — 목표 중심 관리",
        "정책분석가 — 전략적 사고와 리더십"
    ],
}

# ==========================
# ✅ 선택 UI
# ==========================
with st.container():
    chosen = st.selectbox("당신의 MBTI를 선택하세요 👇", MBTI_LIST)

    if chosen:
        st.markdown(f"### 🔷 {chosen} 유형 추천 직업")
        careers = CAREER_MAP.get(chosen, [])
        for i, c in enumerate(careers, 1):
            st.markdown(f"<div class='career-box'><b>{i}. {c}</b></div>", unsafe_allow_html=True)

        st.success("✨ 위 추천은 MBTI 성향을 기반으로 한 예시입니다. 개인의 흥미, 가치관, 능력을 함께 고려하세요!")

        # 다운로드 버튼
        txt_out = f"MBTI: {chosen}\\n추천 진로:\\n" + \"\\n\".join([f\"- {c}\" for c in careers])
        st.download_button("📄 추천 목록 다운로드", txt_out, file_name=f\"{chosen}_careers.txt\")

# ==========================
# ✅ 사이드바 정보
# ==========================
st.sidebar.header("ℹ️ 사용법")
st.sidebar.write(
    \"\"\"1️⃣ MBTI를 선택하면 추천 직업 목록이 표시됩니다.  
2️⃣ 각 직업은 MBTI의 성향을 기반으로 합니다.  
3️⃣ Streamlit Cloud에서 바로 실행하거나,  
`streamlit run main.py` 로 로컬에서 실행하세요.\"\"\"
)

st.sidebar.markdown(\"---\")  
st.sidebar.caption(\"Developed with ❤️ using Streamlit\")

